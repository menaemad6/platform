{% extends "base.html" %}
{% load static %}


{% block title%}{{post.title}} - {{post.user}}{% endblock title %}




{% block head %}


<style>
    .attachment {
        padding: 10px;
    }

    .attachment h6 {
        text-decoration: underline;
    }

    .attachment:hover {
        background-color: #E0E0E0;
    }
</style>

{% endblock head %}

{% block content %}

<body>






    {% if user_profile.premium == True %}

    {% if text == 'yes' %}

    <!-- Lesson Detail Start -->
    <div class="container-fluid py-5" style="background-color: #f1f1f1;">
        <div class="container">
            <div class="text-center mb-5">
                <!-- <h5 class="text-primary text-uppercase mb-3" style="letter-spacing: 5px;">Lessons</h5> -->
                <!-- <h1 class="">You Must Purchase This Lesson First To View It!</h1> -->
            </div>


            <div class="row" style="padding: 10px;">

                <div class="col-12 col-lg-7">

                    <div class="box text-center"
                        style="background-color: white; margin-bottom: 20px; padding-top: 10px; padding-bottom: 10px;">
                        <div>
                            <h1 class="" style="color: black; font-size: 25px;">{{post.title}}</h1>
                        </div>
                    </div>

                    <div class="box" style="background-color: white; padding: 20px; margin-bottom: 20px;">
                        {% if post.image %}
                        <img class="img-fluid" src="{{post.image.url}}" style="width: 100%;">
                        {% else %}
                        <img class="img-fluid" src="{% static 'img/course-3.jpg' %}" alt="">
                        {% endif %}
                    </div>
                </div>




                <div class="col-12 col-lg-5">

                    <div class="box" style="background-color: white; padding: 10px;">


                        <a href="/lessons/progress/{{post.id}}" class="btn btn-primary w-100 w-100"
                            style="border-radius: 0; border: 0;">

                            <span style="font-size: 10px;"><i class="fa fa-2x fa-eye mr-3"></i></span>Complete
                        </a>
                    </div>



















                    <div class="box" style="background-color: white; margin-top: 22px; padding: 15px;">
                        <div>
                            <h1 class="" style="color: black; font-size: 23px;"><span
                                    style="border-bottom: 3px #fd771e solid;">Details</span></h1>
                        </div>

                        <div style="margin-top: 40px; margin-bottom: 10px;">
                            <p>
                                <i class="fa-solid fa-money-bill text-primary" style="font-size: 20px;"></i>
                                <span
                                    style="margin-left: 10px; font-size: 18px; color: black; text-transform: capitalize;">Price
                                    : <span style="color: #5b5e5e;">{{post.price}} EGP</span></span>
                            </p>
                        </div>

                        <div style="margin-top: 20px; margin-bottom: 10px;">
                            <p>
                                <i class="fa-solid fa-calendar-days text-primary" style="font-size: 20px;"></i>
                                <span
                                    style="margin-left: 10px; font-size: 18px; color: black; text-transform: capitalize;">Date
                                    : <span style="color: #5b5e5e;">{{post.created_at|date:"SHORT_DATE_FORMAT"}}
                                    </span></span>
                            </p>
                        </div>




                    </div>

                </div>













            </div>
        </div>
    </div>
    <!-- Lesson Detail End -->

    {% endif %}

    {% if text == 'no' %}

    <!-- Lesson Detail Start -->
    <div class="container-fluid py-5" style="background-color: #f1f1f1;">
        <div class="container">
            <div class="text-center mb-5">
                <!-- <h5 class="text-primary text-uppercase mb-3" style="letter-spacing: 5px;">Lessons</h5> -->
                <!-- <h1 class="">You Must Purchase This Lesson First To View It!</h1> -->
            </div>


            <div class="row" style="padding: 10px;">

                <div class="col-12 col-lg-7">


                    <div class="box" style="background-color: white; padding: 20px; margin-bottom: 20px;">
                        {% if post.image %}
                        <img class="img-fluid" src="{{post.image.url}}" style="width: 100%;">
                        {% else %}
                        <img class="img-fluid" src="{% static 'img/course-3.jpg' %}" alt="">
                        {% endif %}
                    </div>


                    <div class="box text-center"
                    style="background-color: white; margin-bottom: 50px; padding-top: 10px; padding-bottom: 10px;">
                    <div>
                        <h1 class="" style="color: black; font-size: 25px;">{{post.title}}</h1>
                    </div>
                </div>
                </div>




                <div class="col-12 col-lg-5">

                    <div class="box" style="background-color: white; padding: 10px;">
                        <div class="mb-5">
                            <h1 class="" style="color: black; font-size: 23px;"><span
                                    style="border-bottom: 3px #fd771e solid;">Purchase Ways</span></h1>
                        </div>

                        <button type="button" class="btn btn-primary w-100" style="border-radius: 0;"
                            data-toggle="modal" data-target="#exampleModalCenter">
                            <i class="fa fa-2x fa-barcode mr-3" style="font-size: 18px;"></i>By Code
                        </button>

                        <button type="button" class="btn btn-primary w-100 mt-2" style="border-radius: 0;"
                            data-toggle="modal" data-target="#wallet-buy">
                            <i class="fa fa-2x fa-money-bill mr-3" style="font-size: 18px;"></i>By Wallet
                        </button>
                    </div>



                    <!-- <form action="/buy-lesson" method="POST" style="margin-top: 5px; margin-bottom: 10px;">
                        {% csrf_token %}
                        <input type="hidden" value="{{user_profile.user}}" name="buyer" hidden />
                        <input type="hidden" value="{{post.id}}" name="post" hidden />



                        <button type="submit" class="w-100" style="border-radius: 0; border: 0;">
                            <a href="/buy-lesson?post_id={{post.id}}" class="btn btn-success w-100"
                                style="border-radius: 0;">
                                <span style="font-size: 10px;"><i class="fa fa-2x fa-barcode mr-3"></i></span>Code</a>
                        </button>
                    </form> -->




                    <!-- Code Charge -->
                    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
                        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLongTitle">Purchase Lesson By Code</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>


                                <form action="/lesson-code-charge" method="POST"
                                    style="margin-top: 5px; margin-bottom: 10px;">
                                    {% csrf_token %}
                                    <div class="modal-body">

                                        <div class="input-group mb-3">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text" id="basic-addon1"><i
                                                        class="fa fa-2x fa-barcode text-primary mr-3"
                                                        style="font-size: 20px;"></i></span>
                                            </div>
                                            <input type="teext" name="code" class="form-control" placeholder="Code"
                                                aria-label="Username" aria-describedby="basic-addon1">
                                        </div>

                                        <input type="hidden" value="{{post.id}}" name="post-id" hidden />
                                        <input type="hidden" value="{{post.price}}" name="price" hidden />


                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary"
                                            data-dismiss="modal">Close</button>
                                        <button type="submit" class="btn btn-primary pl-5 pr-5">Charge</button>
                                    </div>
                                </form>


                            </div>
                        </div>
                    </div>
                    <!-- Code Charge -->


                    <!-- Wallet -->
                    <div class="modal fade" id="wallet-buy" tabindex="-1" role="dialog"
                        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLongTitle">Purchase Lesson By Wallet</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>


                                <form action="/buy-lesson" method="POST" style="margin-top: 5px; margin-bottom: 10px;">
                                    {% csrf_token %}
                                    <div class="modal-body">
                                        Are you sure you want to buy ({{post.title}}) for ({{post.price}}) ?

                                        <input type="hidden" value="{{user_profile.user}}" name="buyer" hidden />
                                        <input type="hidden" value="{{post.id}}" name="post" hidden />


                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary"
                                            data-dismiss="modal">Close</button>

                                            <button type="submit" class="btn btn-primary pl-3 pr-3" style="color: white;">

                                                <span style="font-size: 10px;"><i
                                                        class="fa fa-2x fa-money-bill mr-3"></i></span>Buy

                                            </button>


                                            <!-- <button type="submit" class="btn btn-primary" style="color: white;">
                                                <a href="/buy-lesson?post_id={{post.id}}" class="btn w-100  pl-3 pr-3"
                                                style="border-radius: 0; color: white;">
                                                <span style="font-size: 10px;"><i
                                                        class="fa fa-2x fa-money-bill mr-3"></i></span>Buy
                                                </a>
                                            </button> -->




                                        <!-- <button type="submit" class="w-100 " style="border-radius: 0; border: 0; background-color: chartreuse;">
                                            <a href="/buy-lesson?post_id={{post.id}}" class="btn btn-success w-100"
                                                style="border-radius: 0;">
                                                <span style="font-size: 10px;"><i
                                                        class="fa fa-2x fa-money-bill mr-3"></i></span>Buy
                                                </a>
                                        </button> -->
                                    </div>


                                </form>


                            </div>
                        </div>
                    </div>
                    <!-- Walet -->




                    <!-- <form action="/buy-lesson" method="POST" style="margin-top: 10px; margin-bottom: 10px; padding: 0;">
                        {% csrf_token %}
                        <input type="hidden" value="{{user_profile.user}}" name="buyer" hidden />
                        <input type="hidden" value="{{post.id}}" name="post" hidden />



                        <button type="submit" class="w-100 " style="border-radius: 0; border: 0;">
                            <a href="/buy-lesson?post_id={{post.id}}" class="btn btn-success w-100"
                                style="border-radius: 0;">
                                <span style="font-size: 10px;"><i class="fa fa-2x fa-money-bill mr-3"></i></span>By
                                Wallet</a>
                        </button>
                    </form> -->






                    <div class="box" style="background-color: white; margin-top: 50px; padding: 15px;">
                        <div>
                            <h1 class="" style="color: black; font-size: 23px;"><span
                                    style="border-bottom: 3px #fd771e solid;">Details</span></h1>
                        </div>

                        <div style="margin-top: 40px; margin-bottom: 10px;">
                            <p>
                                <i class="fa-solid fa-money-bill text-primary" style="font-size: 20px;"></i>
                                <span
                                    style="margin-left: 10px; font-size: 18px; color: black; text-transform: capitalize;">Price
                                    : <span style="color: #5b5e5e;">{{post.price}} EGP</span></span>
                            </p>
                        </div>

                        <div style="margin-top: 20px; margin-bottom: 10px;">
                            <p>
                                <i class="fa-solid fa-calendar-days text-primary" style="font-size: 20px;"></i>
                                <span
                                    style="margin-left: 10px; font-size: 18px; color: black; text-transform: capitalize;">Date
                                    : <span style="color: #5b5e5e;">{{post.created_at|date:"SHORT_DATE_FORMAT"}}
                                    </span></span>
                            </p>
                        </div>




                    </div>

                </div>













            </div>
        </div>
    </div>
    <!-- Lesson Detail End -->




    <!-- Lessons Start -->
    <!-- <div class="container-fluid py-5" style="background-color: red;">
        <div class="container py-5">
            <div class="text-center mb-5">

                <h1 class="">You Must Purchase This Lesson First To View It!</h1>
            </div>
            <div class="row justify-content-center">




                <div class="col-lg-6 col-md-6 mb-4" style="position: relative;">
                    <div class="rounded overflow-hidden mb-2">
                        {% if post.image %}
                        <img class="img-fluid" src="{{post.image.url}}">
                        {% else %}
                        <img class="img-fluid" src="{% static 'img/course-3.jpg' %}" alt="">
                        {% endif %}

                        <div class="bg-secondary p-4">
                            <div class="d-flex justify-content-between mb-3">
                                <small class="m-0" style="text-transform: uppercase;">

                                    {% if post.teacher_img %}
                                    <img src="{{post.teacher_img.url}}" class="rounded-circle "
                                        style="width:40px; border-radius: 10px; max-height: 50px; margin-right: 5px;"
                                        alt="">
                                    {% else %}
                                    <img src="{% static 'img/default-profile-image.jpg' %}" class="rounded-circle "
                                        style="width:40px; border-radius: 10px; max-height: 50px; margin-right: 5px;"
                                        alt="">
                                    <img src="">
                                    {% endif %}



                                    {{post.teacher_name}}
                                </small>
                                <span class="m-0" style="text-decoration: none;">
                                    <a href="/like-post?post_id={{post.id}}" style="text-decoration: none;">
                                        <i class="far fa-thumbs-up text-primary mr-2"
                                            style="font-size: 22px; text-decoration: none;"></i>({{post.no_of_likes}})
                                    </a>
                                </span>



                            </div>
                            <span class="h5" href="/lessons/{{post.slug}}">{{post.title}}</span>

                            <div class="border-top mt-4 pt-4">
                                <div class="d-flex justify-content-between">
                                    <h6 class="m-0"><i
                                            class="fa fa-clock text-primary mr-2"></i>{{post.created_at|date:"SHORT_DATE_FORMAT"}}
                                    </h6>
                                    <h6 class="m-0"><i class="fa fa-money-bill text-primary mr-2"
                                            style="font-size: 25px;"></i><span
                                            style="font-size: 30px; color: black;">{{post.price}}</span>
                                    </h6>
                                </div>

                                <form action="/buy-lesson" method="POST">
                                    {% csrf_token %}
                                    <input type="hidden" value="{{user_profile.user}}" name="buyer" hidden />
                                    <input type="hidden" value="{{post.id}}" name="post" hidden />





                                    <button type="submit" class="w-100 mt-4" style="border-radius: 0; border: 0;">
                                        <a href="/buy-lesson?post_id={{post.id}}" class="btn btn-success w-100"
                                            style="border-radius: 0;">
                                            <span style="font-size: 10px;"><i
                                                    class="fa fa-2x fa-money-bill mr-3"></i></span>Purchase</a>
                                    </button>



                                </form>


                              



                                <a href="/lessons" class="btn btn-dark w-100 mt-3" style="border-radius: 0;">
                                    <span style="font-size: 10px;"><i
                                            class="fa fa-solid fa-arrow-left mr-3"></i></span>Back</a>


                                <div>













                                </div>
                            </div>
                        </div>
                    </div>
                </div>

















            </div>
        </div>
    </div> -->
    <!-- Lessons End -->

    {% endif %}


















    {% endif %}


    {% if user_profile.premium == False %}
    <div class="container-fluid py-5">
        <div class="container py-5">

            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="contact-form bg-secondary rounded p-5 text-center">
                        <div id="success"></div>

                        <p style="font-size: 23px;">You Must Be Premium User To View Activities</p>
                        <a href="get-premium" class="btn btn-success mt-3 w-100">Get Premium</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}


</body>

{% endblock content %}